{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Downloads/Taskoo/TaskManage/src/components/taskForm.jsx"],"sourcesContent":["// components/taskForm.jsx\r\n\"use client\";\r\n\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport axios from \"axios\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nexport default function TaskForm({ onTaskAdded }) {\r\n  const { data: session } = useSession();\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [mounted, setMounted] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    title: \"\",\r\n    description: \"\"\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  const titleInputRef = useRef(null);\r\n  const buttonRef = useRef(null);\r\n  const overlayRef = useRef(null);\r\n  \r\n  // Current user and timestamp values as specified in the latest update\r\n  const currentUser = session?.user?.email;\r\n  const currentDateTime = new Date().toLocaleDateString();\r\n  \r\n  // Setup portal mounting on component init\r\n  useEffect(() => {\r\n    setMounted(true);\r\n    return () => setMounted(false);\r\n  }, []);\r\n  \r\n  // Focus input once when modal opens\r\n  useEffect(() => {\r\n    if (isModalOpen && titleInputRef.current) {\r\n      setTimeout(() => {\r\n        titleInputRef.current.focus();\r\n      }, 100);\r\n    }\r\n  }, [isModalOpen]);\r\n  \r\n  // Lock/unlock body scroll when modal is open\r\n  useEffect(() => {\r\n    if (isModalOpen) {\r\n      document.body.style.overflow = 'hidden';\r\n    } else {\r\n      document.body.style.overflow = '';\r\n    }\r\n    \r\n    return () => {\r\n      document.body.style.overflow = '';\r\n    };\r\n  }, [isModalOpen]);\r\n  \r\n  const openModal = () => setIsModalOpen(true);\r\n  const closeModal = () => setIsModalOpen(false);\r\n  \r\n  // Use a single handler function with computed property names\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n  \r\n  const handleBackdropClick = (e) => {\r\n    if (e.target === overlayRef.current) {\r\n      if (!formData.title && !formData.description) {\r\n        closeModal();\r\n      } else {\r\n        // Show toast if user tries to close with data entered\r\n        toast.error(\"Please use the Cancel button to discard your task\");\r\n      }\r\n    }\r\n  };\r\n  \r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!formData.title.trim()) {\r\n      toast.error(\"Please enter a task title\");\r\n      return;\r\n    }\r\n    \r\n    // Show loading toast\r\n    const loadingToast = toast.loading(\"Adding task...\");\r\n    setLoading(true);\r\n    \r\n    try {\r\n      const token = session?.user?.token;\r\n      if (!token) {\r\n        throw new Error(\"Authentication token missing\");\r\n      }\r\n      \r\n      const response = await axios.post(\"/api/tasks\", \r\n        {\r\n          title: formData.title.trim(),\r\n          description: formData.description.trim(),\r\n          completed: false\r\n        }, \r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`\r\n          }\r\n        }\r\n      );\r\n      \r\n      // Update loading toast to success\r\n      toast.success(\"Task added successfully!\", { id: loadingToast });\r\n      \r\n      // Reset form\r\n      setFormData({ title: \"\", description: \"\" });\r\n      closeModal();\r\n      \r\n      // Update parent component\r\n      if (onTaskAdded) onTaskAdded(response.data);\r\n      \r\n    } catch (error) {\r\n      console.error(\"Error adding task:\", error);\r\n      // Update loading toast to error\r\n      toast.error(error.response?.data?.message || \"Failed to add task\", { id: loadingToast });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  const handleCancel = () => {\r\n    if (formData.title.trim() || formData.description.trim()) {\r\n      toast.success(\"Task creation cancelled\");\r\n    }\r\n    setFormData({ title: \"\", description: \"\" });\r\n    closeModal();\r\n  };\r\n  \r\n  // Button component - always in the normal DOM\r\n  const AddButton = (\r\n    <button\r\n      ref={buttonRef}\r\n      onClick={openModal}\r\n      className=\"focus:outline-none text-white bg-red-500 hover:bg-red-700 focus:ring-4 focus:ring-red-300 font-medium rounded-xl text-sm p-2 m-1\"\r\n      aria-label=\"Add task\"\r\n      type=\"button\"\r\n    >\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n        <path fillRule=\"evenodd\" d=\"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z\" clipRule=\"evenodd\" />\r\n      </svg>\r\n    </button>\r\n  );\r\n  \r\n  // Modal component - rendered via Portal\r\n  const TaskFormModal = (\r\n    <div \r\n      ref={overlayRef}\r\n      className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/30 backdrop-blur-sm\"\r\n      onClick={handleBackdropClick}\r\n    >\r\n      <div \r\n        className=\"bg-white rounded-lg shadow-xl border border-gray-200 max-w-md w-full\"\r\n        onClick={e => e.stopPropagation()}\r\n        style={{animation: 'fadeIn 0.2s ease-out'}}\r\n      >\r\n        <div className=\"p-4 border-b border-gray-200 flex justify-between items-center\">\r\n          <h3 className=\"text-lg font-medium text-gray-800\">Add New Task</h3>\r\n          <div className=\"text-xs text-gray-500\">{currentDateTime}</div>\r\n        </div>\r\n        \r\n        <form onSubmit={handleSubmit} className=\"p-4 space-y-4\">\r\n          <div>\r\n            <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Title\r\n            </label>\r\n            <input\r\n              ref={titleInputRef}\r\n              id=\"title\"\r\n              name=\"title\"\r\n              type=\"text\"\r\n              placeholder=\"Enter task title\"\r\n              value={formData.title}\r\n              onChange={handleInputChange}\r\n              className=\"w-full px-3 py-2.5 text-gray-700 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-colors\"\r\n            />\r\n          </div>\r\n          \r\n          <div>\r\n            <label htmlFor=\"description\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Description\r\n            </label>\r\n            <input\r\n              id=\"description\"\r\n              name=\"description\"\r\n              type=\"text\"\r\n              placeholder=\"Enter description (optional)\"\r\n              value={formData.description}\r\n              onChange={handleInputChange}\r\n              className=\"w-full px-3 py-2.5 text-gray-700 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent transition-colors\"\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"pt-2 flex items-center justify-between\">\r\n            <div className=\"text-xs text-gray-500\">\r\n              Adding as: {currentUser}\r\n            </div>\r\n            \r\n            <div className=\"flex space-x-3\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleCancel}\r\n                className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              \r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading || !formData.title.trim()}\r\n                className={`px-4 py-2 rounded-md text-white text-sm font-medium shadow-sm transition-all duration-200\r\n                  ${loading || !formData.title.trim() \r\n                    ? 'bg-red-400 cursor-not-allowed' \r\n                    : 'bg-red-600 hover:bg-red-700 hover:shadow'}`}\r\n              >\r\n                {loading ? (\r\n                  <div className=\"flex items-center\">\r\n                    <svg className=\"animate-spin -ml-0.5 mr-2 h-3 w-3 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                    </svg>\r\n                    Adding...\r\n                  </div>\r\n                ) : \"Add Task\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n  \r\n  return (\r\n    <>\r\n      {AddButton}\r\n      {mounted && isModalOpen && createPortal(TaskFormModal, document.body)}\r\n      <style jsx global>{`\r\n        @keyframes fadeIn {\r\n          from { opacity: 0; transform: scale(0.95); }\r\n          to { opacity: 1; transform: scale(1); }\r\n        }\r\n      `}</style>\r\n    </>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 422, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 428, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Downloads/Taskoo/TaskManage/src/lib/utils.js"],"sourcesContent":["import { clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs) {\r\n  return twMerge(clsx(inputs));\r\n}\r\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAM;IAC1B,OAAO,CAAA,GAAA,8JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,wIAAA,CAAA,OAAI,AAAD,EAAE;AACtB","debugId":null}},
    {"offset": {"line": 441, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 447, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Downloads/Taskoo/TaskManage/src/components/ui/button.jsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90\",\r\n        destructive:\r\n          \"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40\",\r\n        outline:\r\n          \"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground\",\r\n        secondary:\r\n          \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\r\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n        link: \"text-primary underline-offset-4 hover:underline\",\r\n      },\r\n      size: {\r\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\r\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\r\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\r\n        icon: \"size-9\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}) {\r\n  const Comp = asChild ? Slot : \"button\"\r\n\r\n  return (\r\n    (<Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props} />)\r\n  );\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,mKAAA,CAAA,MAAG,AAAD,EACvB,8cACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OACJ;IACC,MAAM,OAAO,UAAU,mKAAA,CAAA,OAAI,GAAG;IAE9B,qBACG,6LAAC;QACA,aAAU;QACV,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAEf;KAfS","debugId":null}},
    {"offset": {"line": 506, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 512, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Downloads/Taskoo/TaskManage/src/components/taskCard.jsx"],"sourcesContent":["import React from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { Trash2, Edit, CheckCircle, Circle } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { motion } from 'framer-motion';\r\n\r\nconst TaskCard = ({ task, onDelete, onToggleComplete, onEdit }) => {\r\n  const taskId = task.id || task._id || '';\r\n  \r\n  if (!taskId) {\r\n    return null;\r\n  }\r\n\r\n  const handleToggle = () => {\r\n    onToggleComplete(taskId, !task.completed);\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: 10 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      exit={{ opacity: 0, y: -10 }}\r\n      className={cn(\r\n        \"task-card p-4 rounded-xl border\",\r\n        task.completed \r\n          ? \"bg-secondary/50 border-secondary\" \r\n          : \"bg-white border-border\"\r\n      )}\r\n    >\r\n      <div className=\"flex items-start gap-3\">\r\n        <Button \r\n          variant=\"ghost\" \r\n          size=\"icon\" \r\n          className={cn(\r\n            \"h-6 w-6 rounded-full p-0 mt-0.5\",\r\n            task.completed ? \"text-primary\" : \"text-muted-foreground\"\r\n          )}\r\n          onClick={handleToggle}\r\n        >\r\n          {task.completed ? <CheckCircle className=\"h-5 w-5\" /> : <Circle className=\"h-5 w-5\" />}\r\n        </Button>\r\n        \r\n        <div className=\"flex-1 min-w-0\">\r\n          <h3 className={cn(\r\n            \"font-medium text-base mb-1 break-words\",\r\n            task.completed && \"line-through text-muted-foreground\"\r\n          )}>\r\n            {task.title}\r\n          </h3>\r\n          \r\n          {task.description && (\r\n            <p className={cn(\r\n              \"text-sm text-muted-foreground break-words\",\r\n              task.completed && \"line-through opacity-70\"\r\n            )}>\r\n              {task.description}\r\n            </p>\r\n          )}\r\n        </div>\r\n        \r\n        <div className=\"task-actions flex items-center gap-1 ml-2\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            className=\"h-7 w-7 text-muted-foreground hover:text-accent\"\r\n            onClick={() => onEdit(task)}\r\n          >\r\n            <Edit className=\"h-4 w-4\" />\r\n          </Button>\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            className=\"h-7 w-7 text-muted-foreground hover:text-destructive\"\r\n            onClick={() => onDelete(taskId)}\r\n          >\r\n            <Trash2 className=\"h-4 w-4\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default TaskCard;"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;;AAEA,MAAM,WAAW,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,gBAAgB,EAAE,MAAM,EAAE;IAC5D,MAAM,SAAS,KAAK,EAAE,IAAI,KAAK,GAAG,IAAI;IAEtC,IAAI,CAAC,QAAQ;QACX,OAAO;IACT;IAEA,MAAM,eAAe;QACnB,iBAAiB,QAAQ,CAAC,KAAK,SAAS;IAC1C;IAEA,qBACE,6LAAC,6LAAA,CAAA,SAAM,CAAC,GAAG;QACT,SAAS;YAAE,SAAS;YAAG,GAAG;QAAG;QAC7B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,MAAM;YAAE,SAAS;YAAG,GAAG,CAAC;QAAG;QAC3B,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,mCACA,KAAK,SAAS,GACV,qCACA;kBAGN,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC,qIAAA,CAAA,SAAM;oBACL,SAAQ;oBACR,MAAK;oBACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,mCACA,KAAK,SAAS,GAAG,iBAAiB;oBAEpC,SAAS;8BAER,KAAK,SAAS,iBAAG,6LAAC,8NAAA,CAAA,cAAW;wBAAC,WAAU;;;;;6CAAe,6LAAC,yMAAA,CAAA,SAAM;wBAAC,WAAU;;;;;;;;;;;8BAG5E,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACd,0CACA,KAAK,SAAS,IAAI;sCAEjB,KAAK,KAAK;;;;;;wBAGZ,KAAK,WAAW,kBACf,6LAAC;4BAAE,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACb,6CACA,KAAK,SAAS,IAAI;sCAEjB,KAAK,WAAW;;;;;;;;;;;;8BAKvB,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,qIAAA,CAAA,SAAM;4BACL,SAAQ;4BACR,MAAK;4BACL,WAAU;4BACV,SAAS,IAAM,OAAO;sCAEtB,cAAA,6LAAC,8MAAA,CAAA,OAAI;gCAAC,WAAU;;;;;;;;;;;sCAElB,6LAAC,qIAAA,CAAA,SAAM;4BACL,SAAQ;4BACR,MAAK;4BACL,WAAU;4BACV,SAAS,IAAM,SAAS;sCAExB,cAAA,6LAAC,6MAAA,CAAA,SAAM;gCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM9B;KA3EM;uCA6ES","debugId":null}},
    {"offset": {"line": 665, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 671, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Downloads/Taskoo/TaskManage/src/app/dashboard/page.jsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { signOut, useSession } from \"next-auth/react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useEffect, useState, useCallback } from \"react\";\r\nimport TaskForm from \"@/components/taskForm\";\r\nimport axios from \"axios\";\r\nimport { Toaster } from \"react-hot-toast\";\r\nimport { LogInIcon, Trash2 } from \"lucide-react\";\r\nimport TaskCard from \"@/components/taskCard\";\r\nimport next from \"next\";\r\n\r\nexport default function Dashboard() {\r\n  const { data: session, status } = useSession();\r\n  const router = useRouter();\r\n  const [tasks, setTasks] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [completedTasks, setCompletedTasks] = useState(new Set())\r\n  \r\n  // Improve task handling function using useCallback for better performance\r\n  const handleTaskAdded = useCallback((newTask) => {\r\n    // Use a functional update to ensure we're working with the latest state\r\n    setTasks(prevTasks => {\r\n      // Check if the task already exists (might happen with optimistic updates)\r\n      const exists = prevTasks.some(task => \r\n        task.id === newTask.id || task._id === newTask._id\r\n      );\r\n      \r\n      // If it exists, don't duplicate it\r\n      if (exists) {\r\n        return prevTasks;\r\n      }\r\n      \r\n      // Add the new task at the beginning of the list\r\n      return [newTask, ...prevTasks];\r\n    });\r\n  }, []);\r\n\r\n  // First check if user is authenticated\r\n  useEffect(() => {\r\n    if (status === \"unauthenticated\") {\r\n      router.push(\"/login\");\r\n    }\r\n  }, [status, router]);\r\n\r\n  // Then fetch tasks only when session is available\r\n  useEffect(() => {\r\n    const fetchTasks = async () => {\r\n      if (status !== \"authenticated\" || !session) {\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        // Notice the token is inside session.user.token based on your data\r\n        const token = session.user.token;\r\n        \r\n        if (!token) {\r\n          console.error(\"No token available in session\");\r\n          setError(\"Authentication token missing\");\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        \r\n        const response = await axios.get(\"/api/tasks\", {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`\r\n          }\r\n        });\r\n        \r\n        setTasks(response.data);\r\n      } catch (err) {\r\n        console.error(\"Error fetching tasks:\", err);\r\n        setError(\"Failed to load tasks. Please try again.\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchTasks();\r\n  }, [session, status]);\r\n\r\n  // Show loading while checking authentication or fetching tasks\r\n  if (status === \"loading\" || (status === \"authenticated\" && loading)) {\r\n    return <div className=\"flex justify-center items-center\">\r\n      <p className=\"text-2xl font-bold\">Loading your workload don't Panic !</p>\r\n    </div>;\r\n  }\r\n\r\n  // User is authenticated and tasks are loaded (or failed to load)\r\n  return (\r\n    <>\r\n      <header>\r\n        <nav>\r\n          <div className=\"flex flex-row items-center justify-between p-2 m-3 rounded-full border\">\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-green-500 p-1\">Taskoo</h1>\r\n            </div>\r\n            <div className=\"flex flex-row items-center gap-3 text-green-500\">\r\n              {session?.user?.email ? (\r\n                <p className=\"text-sm font-bold border rounded-full p-1\">{session.user.email}</p>\r\n              ) : (\r\n                <p>No session data found.</p>\r\n              )}\r\n              \r\n              <button\r\n                className=\"focus:outline-none text-white bg-red-500 hover:bg-red-600 focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm p-2 m-2 dark:focus:ring-yellow-900\" \r\n                onClick={signOut}>\r\n                <LogInIcon size={18}/>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </nav>\r\n      </header>\r\n      <div className=\"p-4\">\r\n        <div className=\"flex flex-row items-center justify-between p-3 rounded-2xl\">\r\n          <div>\r\n            <h2 className=\"font-bold text-2xl\">Your Tasks</h2>\r\n          </div>\r\n          <div>\r\n            <TaskForm onTaskAdded={handleTaskAdded} />\r\n          </div>\r\n        </div>\r\n        {error ? (\r\n          <p className=\"text-red-500\">{error}</p>\r\n        ) : tasks.length === 0 ? (\r\n          <p>No tasks found.</p>\r\n        ) : (\r\n          <div className=\"p-3 flex flex-col space-y-3 rounded-2xl border\">\r\n            {tasks.map((task) => {\r\n              const taskKey = task.id || task._id;\r\n              \r\n              if (!taskKey) {\r\n                console.warn(\"Task is missing an ID:\", task);\r\n                return null; // Skip tasks without an ID\r\n              }\r\n              const isCompleted = completedTasks.has(taskKey)\r\n              \r\n              return (\r\n                <div \r\n                key={taskKey} \r\n                className=\"p-4 rounded-2xl border border-indigo-200 hover:shadow-lg transition-all bg-white\"\r\n              >\r\n                <div className=\"flex flex-row justify-between items-center\">\r\n                  <div className=\"flex items-center gap-3\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={isCompleted}\r\n                      onChange={() => {\r\n                        setCompletedTasks(prev => {\r\n                          const next = new Set(prev);\r\n                          if (isCompleted) {\r\n                            next.delete(taskKey);\r\n                          } else {\r\n                            next.add(taskKey);\r\n                          }\r\n                          return next;\r\n                        });\r\n                      }}\r\n                      className=\"w-5 h-5 accent-indigo-600 cursor-pointer\"\r\n                    />\r\n                    <strong className={`text-lg ${isCompleted ? 'line-through text-gray-400' : 'text-gray-800'}`}>\r\n                      {task.title}\r\n                    </strong>\r\n                  </div>\r\n                  <button className=\"focus:outline-none text-white text-center bg-red-500 hover:bg-red-600 transition-colors p-2 rounded-xl\">\r\n                    <Trash2 size={18}/>\r\n                  </button>\r\n                </div>\r\n                {task.description && (\r\n                  <p className={`mt-2 ml-8 text-sm ${isCompleted ? 'line-through text-gray-400' : 'text-gray-600'}`}>\r\n                    {task.description}\r\n                  </p>\r\n                )}\r\n              </div>\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;;;AATA;;;;;;;;;;AAYe,SAAS;;IACtB,MAAM,EAAE,MAAM,OAAO,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,iJAAA,CAAA,aAAU,AAAD;IAC3C,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,IAAI;IAEzD,0EAA0E;IAC1E,MAAM,kBAAkB,CAAA,GAAA,6JAAA,CAAA,cAAW,AAAD;kDAAE,CAAC;YACnC,wEAAwE;YACxE;0DAAS,CAAA;oBACP,0EAA0E;oBAC1E,MAAM,SAAS,UAAU,IAAI;yEAAC,CAAA,OAC5B,KAAK,EAAE,KAAK,QAAQ,EAAE,IAAI,KAAK,GAAG,KAAK,QAAQ,GAAG;;oBAGpD,mCAAmC;oBACnC,IAAI,QAAQ;wBACV,OAAO;oBACT;oBAEA,gDAAgD;oBAChD,OAAO;wBAAC;2BAAY;qBAAU;gBAChC;;QACF;iDAAG,EAAE;IAEL,uCAAuC;IACvC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;+BAAE;YACR,IAAI,WAAW,mBAAmB;gBAChC,OAAO,IAAI,CAAC;YACd;QACF;8BAAG;QAAC;QAAQ;KAAO;IAEnB,kDAAkD;IAClD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;+BAAE;YACR,MAAM;kDAAa;oBACjB,IAAI,WAAW,mBAAmB,CAAC,SAAS;wBAC1C;oBACF;oBAEA,IAAI;wBACF,mEAAmE;wBACnE,MAAM,QAAQ,QAAQ,IAAI,CAAC,KAAK;wBAEhC,IAAI,CAAC,OAAO;4BACV,QAAQ,KAAK,CAAC;4BACd,SAAS;4BACT,WAAW;4BACX;wBACF;wBAEA,MAAM,WAAW,MAAM,wIAAA,CAAA,UAAK,CAAC,GAAG,CAAC,cAAc;4BAC7C,SAAS;gCACP,eAAe,CAAC,OAAO,EAAE,OAAO;4BAClC;wBACF;wBAEA,SAAS,SAAS,IAAI;oBACxB,EAAE,OAAO,KAAK;wBACZ,QAAQ,KAAK,CAAC,yBAAyB;wBACvC,SAAS;oBACX,SAAU;wBACR,WAAW;oBACb;gBACF;;YAEA;QACF;8BAAG;QAAC;QAAS;KAAO;IAEpB,+DAA+D;IAC/D,IAAI,WAAW,aAAc,WAAW,mBAAmB,SAAU;QACnE,qBAAO,6LAAC;YAAI,WAAU;sBACpB,cAAA,6LAAC;gBAAE,WAAU;0BAAqB;;;;;;;;;;;IAEtC;IAEA,iEAAiE;IACjE,qBACE;;0BACE,6LAAC;0BACC,cAAA,6LAAC;8BACC,cAAA,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;0CACC,cAAA,6LAAC;oCAAG,WAAU;8CAAwC;;;;;;;;;;;0CAExD,6LAAC;gCAAI,WAAU;;oCACZ,SAAS,MAAM,sBACd,6LAAC;wCAAE,WAAU;kDAA6C,QAAQ,IAAI,CAAC,KAAK;;;;;6DAE5E,6LAAC;kDAAE;;;;;;kDAGL,6LAAC;wCACC,WAAU;wCACV,SAAS,iJAAA,CAAA,UAAO;kDAChB,cAAA,6LAAC,+MAAA,CAAA,YAAS;4CAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAM3B,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;0CACC,cAAA,6LAAC;oCAAG,WAAU;8CAAqB;;;;;;;;;;;0CAErC,6LAAC;0CACC,cAAA,6LAAC,iIAAA,CAAA,UAAQ;oCAAC,aAAa;;;;;;;;;;;;;;;;;oBAG1B,sBACC,6LAAC;wBAAE,WAAU;kCAAgB;;;;;+BAC3B,MAAM,MAAM,KAAK,kBACnB,6LAAC;kCAAE;;;;;6CAEH,6LAAC;wBAAI,WAAU;kCACZ,MAAM,GAAG,CAAC,CAAC;4BACV,MAAM,UAAU,KAAK,EAAE,IAAI,KAAK,GAAG;4BAEnC,IAAI,CAAC,SAAS;gCACZ,QAAQ,IAAI,CAAC,0BAA0B;gCACvC,OAAO,MAAM,2BAA2B;4BAC1C;4BACA,MAAM,cAAc,eAAe,GAAG,CAAC;4BAEvC,qBACE,6LAAC;gCAED,WAAU;;kDAEV,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDACC,MAAK;wDACL,SAAS;wDACT,UAAU;4DACR,kBAAkB,CAAA;gEAChB,MAAM,OAAO,IAAI,IAAI;gEACrB,IAAI,aAAa;oEACf,KAAK,MAAM,CAAC;gEACd,OAAO;oEACL,KAAK,GAAG,CAAC;gEACX;gEACA,OAAO;4DACT;wDACF;wDACA,WAAU;;;;;;kEAEZ,6LAAC;wDAAO,WAAW,CAAC,QAAQ,EAAE,cAAc,+BAA+B,iBAAiB;kEACzF,KAAK,KAAK;;;;;;;;;;;;0DAGf,6LAAC;gDAAO,WAAU;0DAChB,cAAA,6LAAC,6MAAA,CAAA,SAAM;oDAAC,MAAM;;;;;;;;;;;;;;;;;oCAGjB,KAAK,WAAW,kBACf,6LAAC;wCAAE,WAAW,CAAC,kBAAkB,EAAE,cAAc,+BAA+B,iBAAiB;kDAC9F,KAAK,WAAW;;;;;;;+BA/BhB;;;;;wBAoCT;;;;;;;;;;;;;;AAMZ;GA1KwB;;QACY,iJAAA,CAAA,aAAU;QAC7B,qIAAA,CAAA,YAAS;;;KAFF","debugId":null}},
    {"offset": {"line": 1034, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}